<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">

      <div class="row">
        <div class="col-2">9 am</div>
        <textarea id="planner-9" class="col-9"></textarea>
        <div class="col-1"><button id="button-9" type="button" onclick="saveText(this);" class="saveBtn">Save</button></div> 
      </div>

      <div class="row">
        <div class="col-2">10 am</div>
        <textarea id="planner-10" class="col-9"></textarea>
        <div class="col-1"><button id="button-10"type="button" onclick="saveText(this);" class="saveBtn">Save</button></div> 
      </div>

      <div class="row">
        <div class="col-2">11 am</div>
        <textarea id="planner-11" class="col-9"></textarea>
        <div class="col-1"><button id="button-11" type="button" onclick="saveText();" class="saveBtn">Save</button></div> 
      </div>

      <div class="row">
        <div class="col-2">12 pm</div>
        <textarea id="planner-12" class="col-9"></textarea>
        <div class="col-1"><button id="button-12" type="button" onclick="saveText();" class="saveBtn">Save</button></div> 
      </div>

      <div class="row">
        <div class="col-2">1 pm</div>
        <textarea id="planner-13" class="col-9"></textarea>
        <div class="col-1"><button id="button-13" type="button" onclick="saveText();" class="saveBtn">Save</button></div> 
      </div>

      <div class="row">
        <div class="col-2">2 pm</div>
        <textarea id="planner-14" class="col-9"></textarea>
        <div class="col-1"><button id="button-14" type="button" onclick="saveText();" class="saveBtn">Save</button></div> 
      </div>

      <div class="row">
        <div class="col-2">3 pm</div>
        <textarea id="planner-15" class="col-9"></textarea>
        <div class="col-1"><button id="button-15" type="button" onclick="saveText();" class="saveBtn">Save</button></div> 
      </div>

      <div class="row">
        <div class="col-2">4 pm</div>
        <textarea id="planner-16" class="col-9"></textarea>
        <div class="col-1"><button id="button-16" type="button" onclick="saveText();" class="saveBtn">Save</button></div> 
      </div>

      <div class="row">
        <div class="col-2">5 pm</div>
        <textarea id="planner-17" class="col-9"></textarea>
        <div class="col-1"><button id="button-17" type="button" onclick="saveText();" class="saveBtn">Save</button></div> 
      </div>


    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.0/moment.min.js"></script>
    <script>

//Moment js variables

      var x = moment()
      var date = moment().format('MMMM Do YYYY')
        
// Display current date on top of scheduler

      function todaysDate() {
           document.getElementById("currentDay").innerHTML = date;
      }
      todaysDate()

// Set textarea CSS class based on past, present, or future hours

var timeOfDay = [9,10,11,12,13,14,15,16,17]
var currentHour = moment().format('H')

function checkTime(){
  for (var i = 0; i < timeOfDay.length; i++){
    if (timeOfDay[i] < currentHour){
        document.querySelector(`#planner-${timeOfDay[i]}`).classList.add("past")
    }
    else if (timeOfDay[i] > currentHour){
        document.querySelector(`#planner-${timeOfDay[i]}`).classList.add("future")
    }
    else {
        document.querySelector(`#planner-${timeOfDay[i]}`).classList.add("present")
    }
  }
}
checkTime()

// Save text to local storage

  function saveText(btnElement){

    var num = btnElement.id.split("-")[1]
    var text = document.querySelector(`#planner-${num}`).value;
    
    localStorage.setItem(`#planner-${num}`, text)
    console.log(num)
  }
  
  
  //Display locally stored values

  function displayText(){

    for (var i = 0; i < timeOfDay.length; i++){
  
    document.querySelector(`#planner-${timeOfDay[i]}`).value = localStorage.getItem(`#planner-${timeOfDay[i]}`)
    console.log(timeOfDay[i])
    }
  }
  displayText()

  


    </script>
   
    
  </body>
</html>
